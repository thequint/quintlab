<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex, nofollow">
<title>Widgets | Quint Lab</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta name="description" content="">
<meta name="author" content="">

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
<link href="https://use.fontawesome.com/releases/v5.0.4/css/all.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="assets/css/index.css">
<link rel="stylesheet" type="text/css" href="assets/css/switchWidgetPage.css">
<!-- <link rel="stylesheet" type="text/css" href="assets/css/quiz.css"> -->
<!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.css" rel="stylesheet">
<link href="quizzes/assets/css/check-radio.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="quizzes/assets/css/styles.css"> -->
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css?family=Quicksand:400,700" rel="stylesheet">
<!-- Custom -->
<link href="jukebox/assets/css/base.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="jukebox/assets/css/styles.css">
<style type="text/css">
body {
    font-family: 'Oswald', sans-serif;
    background-color: #f4f4f4;
    font-weight: 300;
    font-size: 16px;
}
</style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark"> <a href="#" class="navbar-brand mb-0 h1"> <img src="assets/images/qLabLogo.png" alt="" width="100" height="100%" class="d-inline-block align-top"> </a>
    </nav>
    <div class="container" id="main-content">
        <nav aria-label="breadcrumb" role="navigation" id="breadcrumbSection">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Widgets</li>
            </ol>
        </nav>
        <div class="row">
            <div class="col-lg-12">
                <h2 class="display-4">Jukebox</h2>
                <hr>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-4" align="center">
                <h4 class="display-4">Add Moods</h4>
            </div>
            <div class="col-lg-8" align="center">
                <h4 class="display-4"> Preview </h4>
            </div>
        </div>
        <!-- <div class="row">
            
            <div class="col-lg-6 text-center">
                Preview
                <i id="jukebox_preview" class="fa fa-sync-alt"></i>
                <form id='foo'>
                    <input id='jukeboxPushArray' name='jukeboxPushArray' type='text'>
                    <button type='submit'>Generate iFrame</button>
                </form>
                <form>
                    <div class="form-group">
                        <label for="text">Embedded Code</label>
                        <textarea type="text" rows="5" class="form-control iframe-link" placeholder="The link will be shown here..."></textarea>
                        <span class="copy-val">Copy</span>
                    </div>
                </form>
                <div class="preview"></div>
            </div>
        </div> -->
        <div class="row widget-details">
            <div class="col-lg-4">
                <div id="moods_card" class="sortable">
                    <div class="card">
                        <div class="card-header">
                            <h4>Moods #<span class="moods_counter">1</span>
                            <button type="button" class="close question-close" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                            </button>
                        </h4>
                        </div>
                        <div class="form_data card-body">
                            <form>
                                <div class="form-group--main">
                                    <div class="form-group">
                                        <select class="select_category form-control"></select>
                                    </div>
                                    <div class="form-group">
                                        <input id="" type="text" class="song-title_1 form-control" placeholder="Song Title #1">
                                    </div>
                                    <div class="form-group">
                                        <input id="" type="text" class="song-track_1 form-control" placeholder="Youtube Embed Code #1">
                                    </div>
                                </div>
                                <div>
                                    <a href="javascript:void(0);" class="add_track">+ Add Track #2</a>
                                </div>
                                <!-- <button class="btn btn-primary clickMe">Add Mood</button> -->
                                <!-- <a href="javascript:void(0);" class="btn btn-primary">Add Mood</a> -->
                            </form>
                        </div>
                    </div>
                    <!-- adding cards -->
                </div>
                <div class="add-cards"><a href="javascript:void(0);" class="add_card clickMe">+ Add another cards</a></div>
            </div>
            <div class="col-lg-8">
                <div class="">
                    <div class="btn-preview-block clearfix">
                        <button id="jukebox_preview" class="btn btn-primary" type='submit'>Preview Jukebox</button>
                        <form id='foo' style="display:inline-block">
                            <button class="btn btn-primary" type='submit'>Generate iFrame</button>
                            <input id='jukeboxPushArray' name='jukeboxPushArray' type='text'>
                        </form>
                    </div>
                    <div class="generate-iframe-block">
                        <form>
                            <div class="form-group">
                                <label for="text">Embedded Code</label>
                                <textarea type="text" rows="5" class="form-control iframe-link" placeholder="The link will be shown here..."></textarea>
                                <span class="copy-val">Copy</span>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="main-wrap">
                    <div class="main-wrap--overlay"></div>
                    <div class="main-wrap--container">
                        <div id="step01">
                            <span class="box-nut-top-left"><img src="jukebox/assets/images/box-nut.svg"></span>
                            <span class="box-nut-top-right"><img src="jukebox/assets/images/box-nut.svg"></span>
                            <span class="box-nut-btm-left"><img src="jukebox/assets/images/box-nut.svg"></span>
                            <span class="box-nut-btm-right"><img src="jukebox/assets/images/box-nut.svg"></span>
                            <div class="step01--container">
                                <h1 class="main-wrap--headline"><img src="jukebox/assets/images/headline.svg"></h1>
                                <div class="pin-top"><img src="jukebox/assets/images/pin-top.svg"></div>
                                <div class="pin-bottom"><img src="jukebox/assets/images/pin-bottom.svg"></div>
                                <div class="rotating" id="svg_circle"></div>
                            </div>
                        </div>
                        <!-- Step 02 -->
                        <div id="step02">
                            <div class="step02--container">
                                <div class="back-btn"><img src="jukebox/assets/images/back-btn.svg"></div>
                                <div class="iframe-section track-love">
                                    <div class="song-name">
                                        <span>Now Playing</span>
                                        <marquee class="open">
                                            <!-- Jab se tere naina mere naino se laage re -->
                                        </marquee>
                                    </div>
                                    <div class="song-iframe"></div>
                                </div>
                                <footer class="song-footer">
                                    <h2><span>Click to play your mood</span></h2>
                                    <span class="btn-track01 track-btn active">Track 1</span>
                                    <span class="btn-track02 track-btn">Track 2</span>
                                    <ul class="play-icon">
                                    </ul>
                                </footer>
                                <!-- <footer class="song-footer">
                                <h2><span>Click to play your mood</span></h2>

                                <span class="btn-track01 track-btn active">Track 1</span>
                                <span class="btn-track02 track-btn">Track 2</span>

                                <ul class="play-icon">
                                    <li class="heart-icon" data-video="vkKqVE9d_zw" data-videoname="Jab se tere naina mere naino se laage re"><img src="jukebox/assets/images/heart-icon.svg"></li>
                                    <li class="soulful-icon" data-video="Mo5tQDcs__g" data-videoname="Hum Jo Chal Ne Lage..Chal Ne Lage Hai"><img src="jukebox/assets/images/soulful-icon.svg"></li>
                                    <li class="heartbreak-icon" data-video="XdbjtoMkerU" data-videoname="Behati Hawa Sa Tha Woh, Udati Patang Sa Tha Woh"><img src="jukebox/assets/images/heartbreak-icon.svg"></li>
                                    <li class="party-icon" data-video="VzLG6OqOcn8" data-videoname="Deewangi Deewangi Deewangi Hai"><img src="jukebox/assets/images/party-icon.svg"></li>
                                    <li class="surprise-icon" data-video="IIg8H60bRJo" data-videoname="Woh Ladki Hai Kahan"><img src="jukebox/assets/images/surprise-icon.svg"></li>
                                </ul>
                            </footer> -->
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <div id="moods_result">
                    <ul id="svg-labels"></ul>
                </div> -->
                <!-- <div id="chartContainer" style="height: 370px; max-width: 920px; margin: 0px auto;"></div> -->
                <!-- <div class="display_results"></div> -->
            </div>
        </div>
    </div>
    <svg id='pattern' xmlns="http://www.w3.org/2000/svg" version="1.1">
        <defs>
            <pattern id='image' width="1" height="1" viewBox="50 50 100 100">
                <image xlink:href='https://www.thequint.com/quintlab/dashboard/jukebox/assets/images/bg-surprise.svg' width="200%" height="200%" preserveAspectRatio="none"></image>
            </pattern>
        </defs>
    </svg>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="jukebox/assets/js/spreadsheet.js"></script>
    <script src="jukebox/assets/js/dynamic_functions.js"></script>
    <script src="assets/js/jukebox.js"></script>
    <script src="https://css-tricks.com/examples/BlurredText/js/jquery.lettering.js"></script>
    <!-- <script src="jukebox/assets/js/functions.js"></script> -->
    <script data-cfasync="false" type="text/javascript">
    $(window).resize(function() {
        create_pie();
        pie_events();
    });
    jQuery(document).ready(function($) {

        var public_spreadsheet_contact = 'https://docs.google.com/spreadsheets/d/1r1OCM18cjnC17W8sZLhxFnN7xj1YxMU0lNjkjREVAho/pubhtml';

        function copyHandler() {
            $(".copy-val").click(function() {
                console.log("click");
                $(".iframe-link").select();
                document.execCommand('copy');
            });
        }

        // variable to hold request
        var request;

        $("#foo").submit(function(event) {
            event.preventDefault();

            copyHandler();

            // Form Validation
            // if ($.trim($("#Name").val()) === "" || $.trim($("#Comments").val()) === "") {
            //     alert('Please insert all fields');
            // }

            //$("#Comments").val( JSON.stringify(dashboard_data));  
            //dashboard_data.push({});

            // Display Date
            var myDate = new Date();
            var displayDate = (myDate.getMonth() + 1) + '/' + (myDate.getDate()) + '/' + myDate.getFullYear();
            $('#default_block .que-block .timestamp').text(displayDate);

            // abort any pending request
            if (request) {
                request.abort();
            }
            // setup some local variables
            var $form = $(this);
            // let's select and cache all the fields
            var $inputs = $form.find("input, select, button, textarea");
            // serialize the data in the form
            var serializedData = $form.serialize();

            // Disabled form elements will not be serialized.
            $inputs.prop("disabled", true);
            $('#result').text('Sending data...');


            Tabletop.init({
                key: public_spreadsheet_contact,
                callback: showInfo,
                simpleSheet: true
            });


            function showInfo(data) {

                $(".card").each(function(index) {
                    if ($(this).find(".select_category").val() == null) {
                        alert("Select Moods");
                        return 0;

                    } else if ($(this).find(".song-title_1").val() == "") {
                        alert("Insert Title");
                        return 0;

                    } else if ($(this).find(".song-track_1").val() == "") {
                        alert("Insert Track");
                        return 0;
                    } else {

                        $(".generate-iframe-block").show();

                        var embed_url = "<iframe class='quiz-iframe' src='https://www.thequint.com/quintlab/dashboard/jukebox/index.html?id=" + parseInt(data.length + 2) + "' width='100%' frameborder='0'></iframe>";

                        $(".iframe-link").val(embed_url);


                        //$('.preview').prepend('<form><div class="form-group"><label for="text">Embedded Code</label><textarea type="text" rows="5" class="form-control iframe-link" placeholder="The link will be shown here...">' + str + '</textarea><span class="copy-val">Copy</span></div></form>');
                    }
                });

                //console.log(data);

                // fire off the request to /form.php
                request = $.ajax({
                    url: "https://script.google.com/macros/s/AKfycbx1b1UDkqU7Fq1fCSi7XzVG-lspj5t6CYBc8XsMtyB46uL6lcqz/exec",
                    type: "post",
                    data: serializedData
                });

                // callback handler that will be called on success
                request.done(function(response, textStatus, jqXHR) {
                    // log a message to the console
                    //$('#result').html('<a href="https://docs.google.com/spreadsheets/d/10tt64TiALYhPMqR2fh9JzkuhxW7oC0rXXPb_pmJ7HAY/edit?usp=sharing" target="_blank">Success - see Google Sheet</a>');
                    $('#result').html('<span class="success">Success</span>');
                    console.log("Hooray, it worked!");
                });

                // callback handler that will be called on failure
                request.fail(function(jqXHR, textStatus, errorThrown) {
                    // log the error to the console
                    console.error(
                        "The following error occured: " +
                        textStatus, errorThrown
                    );
                });

                // if the request failed or succeeded
                request.always(function() {
                    // reenable the inputs
                    $inputs.prop("disabled", false);
                });

                $('#foo').find('input, textarea').val('');

                //var str = "<iframe src='https://www.thequint.com/quintlab/dashboard/jukebox/index.html?id=" + parseInt(data.length+2) + "' width='100%' frameborder='0'></iframe>";
                //$('.preview').prepend('<form><div class="form-group"><label for="text">Embedded Code</label><textarea type="text" rows="5" class="form-control iframe-link" placeholder="The link will be shown here...">' + str + '</textarea><span class="copy-val">Copy</span></div></form>');
            }

            // prevent default posting of form

        });
    });
    </script>
</body>

</html>